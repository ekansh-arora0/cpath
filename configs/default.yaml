# CPath-Omni Default Configuration
# Copy and modify as needed for your experiments

# Model Configuration
model:
  vision_encoder:
    architecture: "ViT-L-14-336"
    embedding_dim: 3328
    pretrained: "openai"  # Base weights from OpenAI CLIP
    checkpoint: null  # Path to fine-tuned checkpoint
    
  text_encoder:
    model_name: "Qwen/Qwen2-1.5B"
    embedding_dim: 1536
    projection_dim: 3328
    hidden_dim: 2048
    projection_weights: null  # Path to projection weights
    
  normalization:
    mean: [0.48145466, 0.4578275, 0.40821073]
    std: [0.26862954, 0.26130258, 0.27577711]

# Preprocessing Configuration
preprocessing:
  stain_normalization:
    enabled: true
    method: "macenko"
    reference_image: null  # Use default reference
    
  patch_extraction:
    patch_size: 1024
    stride: 512
    level: 0  # Highest resolution
    tissue_threshold: 0.1
    min_tissue_area: 0.5
    
  augmentation:
    enabled: false  # For inference
    train:
      random_flip: true
      color_jitter: 0.1
      random_rotation: 15

# Inference Configuration  
inference:
  mode: "text"  # "text" or "prototype"
  batch_size: 32
  device: "cuda"
  
  text_anchoring:
    cancer_type: "breast_cancer"
    prompt_family: "professional"
    custom_prompts: null
    
  prototype_classification:
    n_prototypes: 50
    selection_method: "balanced"

# Experiment Configuration
experiment:
  seed: 42
  n_bootstrap: 1000
  confidence_level: 0.95
  
  evaluation:
    metrics:
      - "auc"
      - "accuracy"
      - "precision"
      - "recall"
      - "f1"
    threshold: 0.5
    
  output:
    save_predictions: true
    save_embeddings: false
    save_visualizations: true

# Data Configuration
data:
  # Update these paths for your setup
  dog_breast:
    path: "/path/to/dog_breast_data"
    format: "patches"  # "patches" or "wsi"
    
  mast_cell:
    path: "/path/to/mast_cell_data"
    format: "patches"
    
  tcga_brca:
    path: "/path/to/tcga_brca_data"
    format: "wsi"
    manifest: null  # Optional manifest file

# Logging Configuration
logging:
  level: "INFO"
  save_logs: true
  log_dir: "logs"
  tensorboard: false
